## 1. νΈλμ­μ… μ†μ„± ν…μ¤νΈ
### νΈλμ­μ… μ†μ„±μ΄λ€?
νΈλμ­μ…μ λ™μ‘ λ°©μ‹μ„ μ μ–΄ν•κΈ° μ„ν• μ„¤μ •κ°’.<br> 
μ£Όλ΅ λ‹¤μμ μ†μ„±μ΄ μμ

- μ „ν
- κ²©λ¦¬ μμ¤€
- μ½κΈ° μ „μ©
- νƒ€μ„μ•„μ›ƒ
- λ΅¤λ°± μ΅°κ±΄(rollbackFor, noRollbackFor)

### ν…μ¤νΈ λ©μ  ?
- μ„ μ–Έλ νΈλμ­μ… μ†μ„±μ΄ μ‹¤μ λ΅ μ μ©λλ”μ§€ ν™•μΈ
- μμ™Έ λ°μƒ μ‹ λ΅¤λ°± μ—¬λ¶€λ¥Ό ν™•μΈ
- readOnlyκ°€ μ μ©λ κ²½μ° μ‹¤μ λ΅ μ“°κΈ° μ‘μ—…μ΄ μ°¨λ‹¨λλ”μ§€ ν™•μΈ

##  2. μ• λ…Έν…μ΄μ… νΈλμ­μ… μ†μ„±κ³Ό ν¬μΈνΈμ»·
### @Transactionalμ„ λ¶™μΈ λ©”μ„λ“ β†’ νΈλμ­μ…μ΄ μ μ©λλ” ν¬μΈνΈμ»·
- μ¤ν”„λ§ AOP κΈ°λ°μΌλ΅ λ™μ‘ β†’ μ„¤μ •λ νΈλμ­μ… μ†μ„±μ€ Adviceλ΅ μ μ©λ¨
- λ©”μ„λ“ λ‹¨μ„λ΅ μ„Έλ°€ν• νΈλμ­μ… μ†μ„± μ μ© κ°€λ¥

## 3. νΈλμ­μ… μ–΄λ…Έν…μ΄μ…
### @Transactional
```java
@Transactional(
  propagation = Propagation.REQUIRED,
  isolation = Isolation.READ_COMMITTED,
  readOnly = false,
  rollbackFor = SomeException.class
)
```
- ν΄λμ¤/λ©”μ„λ“μ— μ μ© κ°€λ¥
- κµ¬μ²΄μ μΈ νΈλμ­μ… μ†μ„± λ¶€μ—¬ κ°€λ¥

## 4. νΈλμ­μ… μ†μ„±μ„ μ΄μ©ν•λ” ν¬μΈνΈμ»·
- @Transactionalμ΄ λ¶™μ€ λ©”μ„λ“κ°€ νΈλμ­μ… μ μ© λ€μƒμ΄ λ¨
- Spring AOPμ—μ„ ν¬μΈνΈμ»·μ€ @Transactional μ–΄λ…Έν…μ΄μ…μ„ κΈ°μ¤€μΌλ΅ νΈλμ­μ… Adviceλ¥Ό μ μ©

## 5. λ€μ²΄ μ •μ±… 
- νΈλμ­μ… μ μ© λ€μƒμ„ XMLλ΅ μ§€μ •ν•  μλ„ μμ (λ„~~~~λ¬΄ μ~~~~~~~~μ „ λ°©μ‹)
- AspectJ λ“±μ„ μ΄μ©ν• κ³ κΈ‰ ν¬μΈνΈμ»· μ„¤μ •λ„ κ°€λ¥

##  6. νΈλμ­μ… μ–΄λ…Έν…μ΄μ… μ μ©
- μ„ μ–Έμ  λ°©μ‹μΌλ΅ νΈλμ­μ…μ„ μ„¤μ •ν•  μ μμ (@Transactional)
- μ„¤μ •μ΄ κ°„κ²°ν•κ³  μ μ§€λ³΄μκ°€ μ‰¬μ›€
- Service κ³„μΈµ μ¤‘μ‹¬μΌλ΅ μ μ©ν•λ” κ²ƒμ΄ μΌλ°μ μ…λ‹λ‹¤.

## 7. νΈλμ­μ… μ§€μ› ν…μ¤νΈ
- @Transactionalμ„ ν…μ¤νΈ λ©”μ„λ“μ— μ μ©ν•λ©΄, ν…μ¤νΈ ν›„ μλ™ λ΅¤λ°±λ¨
- ν…μ¤νΈμ λ…λ¦½μ„±μ„ λ³΄μ¥
- μ¤ν”„λ§μ ν…μ¤νΈ μ§€μ›μ„ ν†µν•΄ μ‹¤μ  DBλ¥Ό λ€μƒμΌλ΅ νΈλμ­μ… ν…μ¤νΈ κ°€λ¥

## 8. μ„ μ–Έμ  νΈλμ­μ…κ³Ό νΈλμ­μ… μ „ν μ†μ„±
### μ „ν μ†μ„± μμ‹
- REQUIRED (default): νΈλμ­μ…μ΄ μμΌλ©΄ μ°Έμ—¬, μ—†μΌλ©΄ μƒλ΅ μƒμ„±
- REQUIRES_NEW: ν•­μƒ μƒ νΈλμ­μ… μ‹μ‘
- NESTED: μ¤‘μ²© νΈλμ­μ…
- NEVER: νΈλμ­μ…μ΄ μμΌλ©΄ μμ™Έ λ°μƒ

##  9. νΈλμ­μ… λ™κΈ°ν™”μ™€ ν…μ¤νΈ
- νΈλμ­μ… λ™κΈ°ν™”: νΈλμ­μ…μ΄ ν™μ„±ν™”λ μƒνƒμ—μ„ Connectionμ΄λ‚ EntityManagerλ¥Ό κ³µμ ν•λ„λ΅ ν•΄μ£Όλ” κΈ°λ¥
- μ¤ν”„λ§μ€ ThreadLocalμ„ μ΄μ©ν•μ—¬ κ°™μ€ μ¤λ λ“μ—μ„ κ°™μ€ μ»¤λ„¥μ…μ„ κ³µμ ν•κ² ν•΄μ¤

## 10. νΈλμ­μ… λ§¤λ‹μ €μ™€ νΈλμ­μ… λ™κΈ°ν™”
- PlatformTransactionManager μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ νΈλμ­μ…μ„ μ μ–΄
- ν…μ¤νΈλ‚ μ§μ ‘ μ μ–΄κ°€ ν•„μ”ν• κ²½μ° TransactionTemplate μ‚¬μ© κ°€λ¥

## 11. νΈλμ­μ… λ§¤λ‹μ €λ¥Ό μ΄μ©ν• ν…μ¤νΈμ© νΈλμ­μ… μ μ–΄
```java
TransactionTemplate template = new TransactionTemplate(transactionManager);
template.execute(status -> {
   // νΈλμ­μ… λ‚΄ μ‘μ—…
   return null;
});
```
λ…μ‹μ μΌλ΅ νΈλμ­μ…μ„ μ‹μ‘ν•κ³  μ μ–΄ν•  μ μμ

## 12. νΈλμ­μ… λ™κΈ°ν™” κ²€μ¦
- ν…μ¤νΈ μ½”λ“μ—μ„ μ»¤λ„¥μ…μ΄ κ°™μ€μ§€, νΈλμ­μ… λ²”μ„ λ‚΄μ— μλ”μ§€ κ²€μ¦
- νΈλμ­μ…μ΄ κ³µμ λκ³  μλ”μ§€ ν™•μΈν•  μ μμ

## 13. λ΅¤λ°± ν…μ¤νΈ
#### μμ™Έ λ°μƒ μ‹ λ΅¤λ°± μ—¬λ¶€ ν™•μΈ
- @Transactional + μμ™Έ μƒν™© μ λ° β†’ λ΅¤λ°± λλ”μ§€ ν™•μΈ

## 14. ν…μ¤νΈλ¥Ό μ„ν• νΈλμ­μ… μ–΄λ…Έν…μ΄μ…
- ν…μ¤νΈ ν΄λμ¤λ‚ λ©”μ„λ“μ— @Transactional μ‚¬μ© β†’ ν…μ¤νΈ ν›„ μλ™ λ΅¤λ°±
- @Rollback(true) λ…μ‹ κ°€λ¥

## 15. @Rollback, @TransactionConfiguration, NotTransactional, Propagation.NEVER
- @Rollback(false) β†’ μ‹¤μ  μ»¤λ°‹ (λ””λ²„κΉ…μ©)
- @TransactionConfiguration(defaultRollback=true) (κ³Όκ±° μ‚¬μ©, ν„μ¬λ” κ±°μ μ• μ”€)
- NotTransactional: νΈλμ­μ… μ‚¬μ© μ• ν•¨
- Propagation.NEVER: νΈλμ­μ…μ΄ μμΌλ©΄ μμ™Έ λ°μƒ

## 16. ν¨κ³Όμ μΈ DB ν…μ¤νΈ
- ν…μ¤νΈ κ°„μ λ°μ΄ν„° κ°„μ„­ μµμ†ν™”
- @Transactionalλ΅ ν…μ¤νΈλ¥Ό λ…λ¦½μ μΌλ΅ μ‹¤ν–‰
- μ‹¤μ  DB μ‚¬μ© κ¶μ¥, H2 λ“±μΌλ΅ ν™κ²½ μ μ‚¬ν•κ² κµ¬μ„±
- SQL λ΅κ·Έ, μΏΌλ¦¬ μ„±λ¥λ„ ν™•μΈν•  μ μλ” κµ¬μ΅°κ°€ μ΄μƒμ 


## κ¶κΈμ¦
μ¤‘κ°„
> "νΈλμ­μ… μ–΄λ…Έν…μ΄μ…μ—μ„ @Transactionalμ΄ νƒ€μ… λ λ²¨μ΄λ“  λ©”μ„λ“ λ λ²¨μ΄λ“  μƒκ΄€μ—†μ΄ λ¶€μ—¬λ λΉ μ¤λΈμ νΈλ¥Ό λ¨λ‘ μ°Ύμ•„μ„ ν¬μΈνΈ μ»·μ μ„ μ • κ²°κ³Όλ΅ λλ ¤μ¤€λ‹¤."

μ–΄λ–»κ² λλ ¤μ¤€λ‹¤λ”κ±°μ§€? 

#### μ΄λ¥Ό μ΄ν•΄ν•λ ¤λ©΄  AOPμ™€ ν¬μΈνΈμ»· λ™μ‘ λ°©μ‹μ„ μ΄ν•΄ν•λ©΄ λ¨.
μ„μ λ¬Έκµ¬κ°€ μ €λ” μ¤νλ ¤ 'μ¤ν”„λ§ AOPκ°€ νΈλμ­μ… μ μ© λ€μƒμ„ νλ³„ν•λ” λ°©μ‹μ— λ€ν• μ„¤λ…'μΌλ΅ μƒκ°ν–μµλ‹λ‹¤.

κ·Έλ ‡λ‹¤λ©΄, 
### ν¬μΈνΈμ»·μ μ„ μ • κ²°κ³Όλ΅ λλ ¤μ¤€λ‹¤λ” κ²ƒμ€ μ–΄λ–»κ² ???
μ΄λ¥Ό μ €λ”
"μ¤ν”„λ§ AOPλ” @Transactionalμ΄ λ¶™μ€ λ€μƒ(λ©”μ„λ“ or ν΄λμ¤)μ„ μ¤μΊ”ν•λ‹κΉ,<br>
κ·Έ κ²°κ³Όλ΅ "μ΄ κ°μ²΄λ” νΈλμ­μ… Adviceλ¥Ό μ μ©ν•΄μ•Όν•λ‹¤"λ” νλ‹¨μ΄ μ„κ² λλ©΄,<br> 
ν•΄λ‹Ή κ°μ²΄(λΉ)μ— λ€ν•΄ ν”„λ΅μ‹ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ„, νΈλμ­μ…μ„ κ΄€λ¦¬ν•κ² ν•λ” κ²ƒμ΄λ‹¤." λΌκ³  μ΄ν•΄ν–μµλ‹λ‹¤.

>π’΅ "ν¬μΈνΈμ»·μ μ„ μ • κ²°κ³Ό"λ€ β†’ AOPμ—μ„ νΈλμ­μ…μ„ μ μ©ν• μ§€ λ§μ§€ κ²°μ •λ λ€μƒ λ©λ΅μ„ μλ―Έ <br>
π’΅ "λλ ¤μ¤€λ‹¤"λ” β†’ νΈλμ­μ… μ μ© λ€μƒμΌλ΅ μ„ μ •λ λΉμ— νΈλμ­μ… ν”„λ΅μ‹λ¥Ό μ μ©ν•λ‹¤λ” μλ―Έ

### μμ‹
```java
@Service
@Transactional // νƒ€μ… λ λ²¨
public class OrderService {
    public void createOrder() {
        // νΈλμ­μ… μ μ© λ€μƒ
    }

    public void cancelOrder() {
        // μ΄κ²ƒλ„ νΈλμ­μ… λ€μƒ
    }}
```
1. OrderServiceλ” μ¤ν”„λ§μ΄ λΉμΌλ΅ λ“±λ΅ν•  λ• @Transactionalμ„ λ³΄κ³ ,
2. "μ–λ” νΈλμ­μ… Adviceλ¥Ό κ±Έμ–΄μ•Όκ² λ„¤"λΌκ³  νλ‹¨ν•κ² λ¨. β†’ ν¬μΈνΈμ»·μ— μΌμΉ
3. κ·Έλμ„ OrderServiceλ” λ‚΄λ¶€μ μΌλ΅ ν”„λ΅μ‹ κ°μ²΄λ΅ λν•‘λ¨.
4. νΈλμ­μ…μ΄ μ‹μ‘λκ³  μ»¤λ°‹/λ΅¤λ°±μ„ κ΄€λ¦¬ν•΄μ£Όλ” λ™μ‘μ΄ μλ™μΌλ΅ λ“¤μ–΄κ°.

>λ‹¤μ‹ λ§ν•΄,<br>
@Transactionalμ΄ λ¶™μ€ ν΄λμ¤λ‚ λ©”μ„λ“λ” ν¬μΈνΈμ»· ν›„λ³΄μ΄λ©°, <br>
μ¤ν”„λ§μ€ κ·Έλ° λΉλ“¤μ„ μ¤μΊ”ν•κ³ , νΈλμ­μ… Adviceκ°€ ν•„μ”ν• λ€μƒλ“¤μ„ ν¬μΈνΈμ»·μ μ„ μ • κ²°κ³Όλ΅ κ°„μ£Όν•λ‹¤λ” κ²ƒμ΄λ‹¤.<br>
ν•΄λ‹Ή λΉλ“¤μ„ νΈλμ­μ… ν”„λ΅μ‹λ΅ κ°μ‹Έμ„ λ°ν™ν•¨ β†’ κ·Έλμ„ "λλ ¤μ¤€λ‹¤"λ” ν‘ν„μ„ μ“΄ κ²ƒμΌλ΅ μƒκ°λλ‹¤.